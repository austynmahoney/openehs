@model OpenEhs.Web.Models.PatientViewModel
@{
    if (Model.MiddleName != String.Empty) {
        ViewBag.Title = String.Format("OpenEHS - Patient: {2}, {0} {1}", Model.FirstName, Model.MiddleName, Model.LastName);
    } else {
        ViewBag.Title = String.Format("OpenEHS - Patient: {1}, {0}", Model.FirstName, Model.LastName);
    }
}
@section head
{
    <link href="@Url.Content("~/Content/jvert-tabs/jquery-jvert-tabs-1.1.4.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/patient.view.css")" rel="Stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/patient.css")" rel="Stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-jvert-tabs-1.1.4.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/ckedit/ckeditor.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/ckedit/adapters/jquery.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/patient.details.js")" type="text/javascript"></script>
    
    <script type="text/javascript">
        $(document).ready(function () {
            $("#patients-tab").addClass("current");
        });
    </script>
}
<div id="patientViewHeader" class="group">
    @if (Model.MiddleName != String.Empty) {
        <h2>@String.Format("{2}, {0} {1}", Model.FirstName, Model.MiddleName, Model.LastName)</h2>
    } else {
        <h2>@String.Format("{1}, {0}", Model.FirstName, Model.LastName)</h2>
    }
    <h2 style="margin-left: 20px; font-weight: normal;">
        Age: @Model.Age</h2>
    <h2 style="margin-left: 20px; font-weight: normal;">
        DOB: @String.Format("{0:d}", Model.DateOfBirth)</h2>
    <div style="float: right; margin-right: 10px; margin-top: 5px;">
        @Html.CheckBoxFor(model => model.IsActive) @Html.LabelFor(model => model.IsActive, "Active")
    </div>
    <div>
        <input value="New Check-In" id="newCheckInButton" type="button" />
        <input value="Edit Patient" id="editPatientInfoButton" type="button" />
    </div>
</div>
<div id="patientView">
    @Html.HiddenFor(model => model.PatientId, new { @id = "patientId" })
    <div>
        <ul>
            <li><a href="#patientView-Demographics">Demographics</a></li>
            <li><a href="#patientView-Vitals">Vitals</a></li>
            <li><a href="#patientView-RxList">Rx List</a></li>
			<li><a href="#patientView-Immunizations">Immunizations</a></li>
            <li><a href="#patientView-ChronicDiseases">Chronic Diseases</a></li>
            <li><a href="#patientView-Allergies">Allergies</a></li>
            <li><a href="#patientView-VisitHistory">Visit History</a></li>
        </ul>
    </div>
    <div>
        <div id="#patientView-Demographics" class="group">
            @Html.Partial("_tab-Demographics", Model)
        </div>
        <div id="#patientView-Vitals">
            @Html.Partial("_tab-Vitals",Model)
        </div>
        <div id="#patientView-RxList">
            @Html.Partial("_tab-RxList", Model)
        </div>
		<div id="#patientView-Immunizations">
			@Html.Partial("_tab-Immunizations", Model)
		</div>
        <div id="#patientView-ChronicDiseases">
            @Html.Partial("_tab-ChronicDiseases", Model)
        </div>
        <div id="#patientView-Allergy">
            @Html.Partial("_tab-Allergy", Model)
        </div>
        <div id="#patientView-VisitHistory">
            @Html.Partial("_tab-VisitHistory", Model)
        </div>
    </div>
    <p>
        @Html.ActionLink("Edit", "Edit", new { id = Model.PatientId }) |
        @Html.ActionLink("Back to List", "Index")
    </p>
    <div id="newCheckinModal" title="Check In Patient @Model.FirstName @Model.LastName">
        <fieldset>
            <legend>Enter Checkin Information</legend>
            <form id="addCheckin" action="">
                <div id="checkinRadio">
                    <input type="radio" id="checkinType1" name="modal_checkinType" value="0" /><label for="checkinType1">Outpatient</label>
                    <input type="radio" id="checkinType2" name="modal_checkinType" value="1" /><label for="checkinType2">Inpatient</label>
                </div>
                <ul>
                @foreach (var location in Model.GetLocations)
                {
                    <li>@location.Department</li>
                }
                </ul>
            </form>
        </fieldset>
    </div>
</div>
