@model OpenEhs.Domain.Patient

@{
    ViewBag.Title = "Details";
}

@section head
{
    <link href="@Url.Content("~/Content/jvert-tabs/jquery-jvert-tabs-1.1.4.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-jvert-tabs-1.1.4.js")" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#patientView").jVertTabs();
            $("#GenderRadio").buttonset();

            $("#DateOfBirth").datepicker({
                showOn: "button",
                buttonImage: "@Url.Content("~/Content/themes/base/images/calendar.png")",
                buttonImageOnly: true,
                changeYear: true
            });
        });
    </script>
}

<div id="patientView">
    <div>
        <ul>
            <li><a href="#patientView-Basic">Basic</a></li>
            <li><a href="#patientView-Allergies">Allergies</a></li>
            <li><a href="#patientView-Encounters">Encounters</a></li>
        </ul>
    </div>
    <div>
        <div id="#patientView-Basic">
            <fieldset style="padding: 20px;">
                <legend>General</legend>
                <div style="float: left;">
                    @Html.LabelFor(model => model.Id, "Patient ID")<br />
                    @Html.TextBoxFor(model => model.Id)<br />
                    @Html.LabelFor(model => model.FirstName, "First Name")<br />
                    @Html.TextBoxFor(model => model.FirstName)<br />
                    @Html.LabelFor(model => model.MiddleName, "Middle Name")<br />
                    @Html.TextBoxFor(model => model.MiddleName)<br />
                    @Html.LabelFor(model => model.LastName, "Last Name")<br />
                    @Html.TextBoxFor(model => model.LastName)<br />
                </div>
                <div style="margin-left: 20px; float: left;">
                    @Html.LabelFor(model => model.Gender, "Gender")<br />
                    <div id="GenderRadio">
                        @Html.RadioButtonFor(model => model.Gender, "Male", new { @id = "MaleGenderRadio" }) @Html.Label("MaleGenderRadio", "Male")
                        @Html.RadioButtonFor(model => model.Gender, "Female", new { @id = "FemaleGenderRadio" }) @Html.Label("FemaleGenderRadio", "Female")
                    </div>
                    @Html.LabelFor(model => model.DateOfBirth, "DOB")<br />
                    @Html.TextBox("DateOfBirth", String.Format("{0:d}", Model.DateOfBirth))<br />
                    @Html.LabelFor(model => model.PhoneNumber, "Phone Number")<br />
                    @Html.TextBoxFor(model => model.PhoneNumber)
                </div>
            </fieldset>
            <fieldset>
                <legend>Emergency Contact</legend>
            </fieldset>
            @if (Model.Address == null)
            {
                @Html.ActionLink("Add an Address", "addAddress");
            } else {    
                <fieldset>
                    <legend>Address</legend>
                    @Html.LabelFor(model => model.Address.Street1, "Street 1")<br />
                    @Html.TextBoxFor(model => model.Address.Street1)<br />
                    @Html.LabelFor(model => model.Address.Street2, "Street 2")<br />
                    @Html.TextBoxFor(model => model.Address.Street2)<br />
                    @Html.LabelFor(model => model.Address.City)<br />
                    @Html.TextBoxFor(model => model.Address.City)<br />
                    @Html.LabelFor(model => model.Address.Region)<br />
                    @Html.TextBoxFor(model => model.Address.Region)
                </fieldset>
            }
        </div>
        <div id="#patientView-Allergies">
            <ul>
            @foreach (var allergy in Model.Allergies)
            {
                <li>@allergy.Name</li>
            }
            </ul>

        </div>
        <div id="#patientView-Encounters">
            <h3>Encounters go here.</h3>
        </div>
    </div>
</div>
<p>
    @Html.ActionLink("Edit", "Edit", new { id=Model.Id }) |
    @Html.ActionLink("Back to List", "Index")
</p>

